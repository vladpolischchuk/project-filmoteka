const t={BASE_URL:"https://api.themoviedb.org/3",API_KEY:"cf961b1b89f4c4a28558be2b04fdd59a",BASE_IMG_URL:"https://image.tmdb.org/t/p/w500",body:document.querySelector(".body"),searchQuery:document.querySelector(".form-search__input"),libraryMovieList:document.querySelector(".library-film-list"),paginationLink:document.querySelector(".tui-pagination"),listOfMovies:document.querySelector(".home-film-list"),bodyPage:document.querySelector(".wrapper-modal"),backdrop:document.querySelector(".backdrop"),closeBTN:document.querySelector(".close-btn"),searchForm:document.querySelector(".form-search"),btnWrapper:document.querySelector(".wrapper-btn"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},{BASE_URL:e,API_KEY:s}=t;async function n(t){return await fetch(`${e}/movie/${t}?api_key=${s}`).then((t=>{if(!t.ok)throw new Error("Network response was not OK");return t.json()})).then((t=>t)).catch((t=>{console.error("There has been a problem with your fetch operation:",t)}))}let a=[],i=[];const{BASE_IMG_URL:l,body:c,listOfMovies:o,bodyPage:r,backdrop:d,closeBTN:m}=t;function p({id:t,genres:e,original_title:s,overview:n,popularity:c,poster_path:o,title:p,vote_average:u,vote_count:g}){const _=String(u).slice(0,3),h=c.toFixed(1),v=e.map((t=>t.name));let b="";b=null!==o?`\n        <div class="film-modal__poster">\n            <img class='film-modal__img' width="375" height="478" src="${l}${o}"\n                alt="${p}" />\n        </div>\n\n        <div class="film-modal__details-info details-info">\n            \x3c!-- Title --\x3e\n            <h2 class="details-info__title">${p}</h2>\n\n            <ul class="details-info__list-static list-static list">\n\n                <li class="list-static__item">\n                    <p class="info-film-txt">Vote / Votes</p>\n                    <p class="item-vote-rez">\n                        <span class="tem-vote-rez--accent-mode">${_}</span>\n                        ${g}\n                    </p>\n                </li>\n\n                <li class="list-static__item">\n                    <p class="info-film-txt">Popularity</p>\n                    <p class='rez'>${h}</p>\n                </li>\n\n                <li class="list-static__item">\n                    <p class="info-film-txt">Original Title</p>\n                    <p class="rez">${s}</p>\n                </li>\n\n                <li class="list-static__item">\n                    <p class="info-film-txt">Genre</p>\n                    <p class='rez'>${v} </p>\n                </li>\n            </ul>\n\n            <div class="details-info__group">\n                <p class="rez rez-title">about</p>\n                <p class="rez rez-desc">${n}</p>\n            </div>\n\n             <div class="btn-wrapper">\n                <button class="btn btn_modal watched" data-id="${t}">add to Watched</button>\n                <button class="btn btn_modal queue" data-id="${t}">add to queue</button>\n            </div>\n\n\n        </div>`:`\n        <div class="film-modal__poster">\n            <img class='film-modal__img' width="375" height="478" src="https://images.unsplash.com/photo-1512113569142-8a60fccc7caa"\n                alt="${p}" />\n        </div>\n\n        <div class="film-modal__details-info details-info">\n            \x3c!-- Title --\x3e\n            <h2 class="details-info__title">${p}</h2>\n\n            <ul class="details-info__list-static list-static list">\n\n                <li class="list-static__item">\n                    <p class="info-film-txt">Vote / Votes</p>\n                    <p class="item-vote-rez">\n                        <span class="tem-vote-rez--accent-mode">${_}</span>\n                        ${g}\n                    </p>\n                </li>\n\n                <li class="list-static__item">\n                    <p class="info-film-txt">Popularity</p>\n                    <p class='rez'>${h}</p>\n                </li>\n\n                <li class="list-static__item">\n                    <p class="info-film-txt">Original Title</p>\n                    <p class="rez">${s}</p>\n                </li>\n\n                <li class="list-static__item">\n                    <p class="info-film-txt">Genre</p>\n                    <p class='rez'>${v} </p>\n                </li>\n            </ul>\n\n            <div class="details-info__group">\n                <p class="rez rez-title">about</p>\n                <p class="rez rez-desc">${n}</p>\n            </div>\n\n            <div class="btn-wrapper">\n                <button class="btn btn_modal watched" data-id="${t}">add to Watched</button>\n                <button class="btn btn_modal queue" data-id="${t}">add to queue</button>\n        </div>\n        </div>`,r.insertAdjacentHTML("afterBegin",b),d.classList.remove("is-hidden"),m.addEventListener("click",f);const y=document.querySelector(".watched"),S=document.querySelector(".queue");a=JSON.parse(localStorage.getItem("watchedMovies"))||[],i=JSON.parse(localStorage.getItem("queueMovies"))||[],a.includes(String(t))?y.textContent="Remove from watched":y.textContent="Add to watched",i.includes(String(t))?S.textContent="Remove from queue":S.textContent="Add to queue",y.addEventListener("click",(function(t){if(t.target.closest("button").classList.contains("watched")){const e=t.target.dataset.id;if(a.includes(e)){let t=a.indexOf(e);a.splice(t,1),localStorage.setItem("watchedMovies",JSON.stringify(a)),y.textContent="Add to watched"}else a.push(e),localStorage.setItem("watchedMovies",JSON.stringify(a)),y.textContent="Remove from watched"}})),S.addEventListener("click",(function(t){if(t.target.closest("button").classList.contains("queue")){const e=t.target.dataset.id;if(i.includes(e)){let t=i.indexOf(e);i.splice(t,1),localStorage.setItem("queueMovies",JSON.stringify(i)),S.textContent="Add to queue"}else i.push(e),localStorage.setItem("queueMovies",JSON.stringify(i)),S.textContent="Remove from queue"}}))}function u(t){if("card"===t.target.dataset.target){const e=t.target.closest("li").dataset.id;d.addEventListener("click",g),c.classList.add("no-scroll"),n(e).then(p)}}function f(){r.innerHTML="",d.classList.add("is-hidden"),c.classList.remove("no-scroll")}function g(t){t.target.classList.contains("backdrop")&&f(),o.addEventListener("click",u)}window.addEventListener("keydown",(t=>{"Escape"===t.code&&f()}));const{BASE_IMG_URL:_,libraryMovieList:h,btnWrapper:v,btnWatched:b,btnQueue:y}=t;let S=JSON.parse(localStorage.getItem("watchedMovies"))||[],$=JSON.parse(localStorage.getItem("queueMovies"))||[];function L({id:t,title:e,poster_path:s,release_date:n,genres:a}){let i=n.slice(0,4),l=a.map((t=>t.name));l.length>=3&&(l=[l[0],l[1],"Other"]);let c=l.join(", ");return null!==s?`\n            <li class="film-list__item item" data-id="${t}  data-target="card">\n                <img class="film-link__img" src="${_}${s}" alt="${e}" data-target="card"">\n                <div class="wrapper">\n                    <h3 class="film-link__title data-target="card"" >${e}</h3>\n                    <div class="film-link__grup">\n                        <p class="film-genres" data-target="card">${c}</p>\n                        <p class="film-year" data-target="card"><span class="film-line">|</span>${i}</p>\n                    </div>\n                </div>\n            </li>`:`\n            <li class="film-list__item item" data-id="${t}  data-target="card">\n                <img class="film-link__img" src="https://images.unsplash.com/photo-1512113569142-8a60fccc7caa" alt="${e}" data-target="card"">\n                <div class="wrapper">\n                    <h3 class="film-link__title data-target="card"" >${e}</h3>\n                    <div class="film-link__grup">\n                        <p class="film-genres" data-target="card">${c}</p>\n                        <p class="film-year" data-target="card"><span class="film-line">|</span>${i}</p>\n                    </div>\n                </div>\n            </li>`}function w(t){for(let e=0;e<t.length;e++)n(t[e]).then((t=>{let e=L(t);h.insertAdjacentHTML("beforeend",e)}))}if(null!=S&&0!==S.length||null!=$&&0!==$.length)($.length>0||S>0)&&(w($),w(S));else{const t='<h2 class="message-text">Ooops! You library is empty yet :(</h2>\n    <img class="message-img" src=\'https://o.remove.bg/downloads/dc6a848e-b90f-4d1b-9ad7-47629b0398c6/ooops-removebg-preview.png\' >';h.insertAdjacentHTML("beforeend",t)}v.addEventListener("click",(function(t){t.target.closest("button").classList.contains("btn_watched")&&!t.target.closest("button").classList.contains("active")?(b.classList.add("active"),y.classList.remove("active"),h.innerHTML="",w(S)):t.target.closest("button").classList.contains("btn_queue")&&(y.classList.add("active"),b.classList.remove("active"),h.innerHTML="",w($))})),h.addEventListener("click",u);
//# sourceMappingURL=library.91be2d09.js.map
