{"mappings":"AAAO,MAAMA,EAAO,CAClBC,aAAc,kCAEdC,iBAAkBC,SAASC,cAAc,mBAGzCC,UAAWF,SAASC,cAAc,kBAClCE,SAAUH,SAASC,cAAc,aACjCG,SAAUJ,SAASC,cAAc,eCGnCI,eAAeC,IACb,aAAaC,MAAM,mGAChBC,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAM,+BAElB,OAAOF,EAASG,MAAM,IAEvBJ,MAAKK,GACGA,EAAKC,UAEbC,OAAMC,IACLC,QAAQD,MACN,sDACAA,EACD,G,CAyBPX,eAAea,EAAkBC,GAC/B,aAAaZ,MAAM,sCAAqBY,8CACrCX,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAM,+BAElB,OAAOF,EAASG,MAAM,IAEvBJ,MAAKK,GACGA,IAERE,OAAMC,IACLC,QAAQD,MACN,sDACAA,EACD,G,EAnCPX,iBACE,aAAaE,MAAM,0FAChBC,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAM,+BAElB,OAAOF,EAASG,MAAM,IAEvBJ,MAAKK,GACGA,EAAKO,SAEbL,OAAMC,IACLC,QAAQD,MACN,sDACAA,EACD,G,ECbP,GAAsBR,MAAKY,IACvBd,IAAuBE,MAAKK,IACxB,IAAIQ,EA/BZ,SAA+BR,EAAMS,GACjC,GAAoB,IAAhBT,EAAKU,OAGT,OAAOV,EACFW,KAAI,EAAGC,GAAAC,EAAEC,MAAEA,EAAKC,YAAEA,EAAWC,aAAEA,EAAYC,UAAEA,MAC1C,IAAIC,EAAUF,EAAaG,MAAM,EAAG,GAChCZ,EAAS,GACb,IAAK,IAAIa,KAAYH,EAAW,CAC5B,IAAII,EAAQZ,EAAaa,MAAK,EAACV,GAAEA,KAASA,IAAOQ,IACjDb,EAAOgB,KAAKF,EAAMG,K,CAElBjB,EAAOG,QAAU,IACjBH,EAAS,CAACA,EAAO,GAAIA,EAAO,GAAI,UAEpC,IAAIkB,EAAalB,EAAOmB,KAAK,MAC7B,MAAO,2DACqCb,uEACS7B,EAAKC,eAAe8B,WAAqBD,eAAmBD,sIAEvDC,gIAEFW,0GAC8BP,8EAGhF,IAAIQ,KAAK,G,CAKNC,CAAsB3B,EAAMO,GACzCvB,EAAKE,iBAAiB0C,mBAAmB,YAAapB,EAAO,GAC/D,IClCN,MAAMqB,EAAe1C,SAASC,cAAc,mBACtC0C,EAAW3C,SAASC,cAAc,kBAClC2C,EAAW5C,SAASC,cAAc,aAClC4C,EAAW7C,SAASC,cAAc,cAGxC,SAAS6C,GAAkBrB,GAAEA,EAAEL,OAAEA,EAAM2B,eAAEA,EAAcC,SAAEA,EAAQC,WAAEA,EAAUrB,YAAEA,EAAWD,MAAEA,EAAKuB,aAAEA,EAAYC,WAAEA,IAC7G,MAAMC,EAAcC,OAAOH,GAAclB,MAAM,EAAG,GAC5CsB,EAAoBL,EAAWM,QAAQ,GAEvCC,EAAc,uJAGiD3D,EAAKC,eAAe8B,4BACtED,+KAKuBA,kUAOoByB,qCACxCD,iNAMWG,+LAKAP,sLAKA3B,0MAMK4B,wDAKtCL,EAASF,mBAAmB,aAAce,GAC1CZ,EAASa,UAAUC,OAAO,aAC1Bb,EAASc,iBAAiB,QAASC,E,CAGxB,SAAAA,EAAwBC,GACnC,GAAgC,SAA5BA,EAAEC,OAAOC,QAAQD,OAEd,CACH,MAAME,EAAUH,EAAEC,OAAOG,QAAQ,MAAMF,QAAQtC,GAE/CzB,SAASkE,oBAAoB,QAASN,GACtC1C,EAAkB8C,GACbxD,KAAKsC,E,EAMH,SAAAc,IACXhB,EAASa,UAAUU,IAAI,aACvBxB,EAASyB,UAAY,GACrBpE,SAAS2D,iBAAiB,QAASC,E,CALvClB,EAAaiB,iBAAiB,QAASC","sources":["src/js/refs.js","src/js/API/fetch-film-api.js","src/js/films-render.js","src/js/_open-md-info-film.js"],"sourcesContent":["export const refs = {\n  BASE_IMG_URL: 'https://image.tmdb.org/t/p/w500',\n  // list film\n  popularMovieList: document.querySelector('.home-film-list'),\n\n  // MODAL \n  bodyModal: document.querySelector('.wrapper-modal'),\n  backDrop: document.querySelector('.backdrop'),\n  closeBtn: document.querySelector('.close-btn'),\n};","const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'cf961b1b89f4c4a28558be2b04fdd59a';\nconst page = 1;\n\nexport {\n  fetchPopularFilmsAPI,\n  fetchGenresFilmsAPI,\n  fetchMovieInfoAPI,\n};\n\n// fetch information about popular movies\nasync function fetchPopularFilmsAPI() {\n  return await fetch(`${BASE_URL}/trending/movie/day?api_key=${API_KEY}&page=${page}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not OK');\n      }\n      return response.json();\n    })\n    .then(data => {\n      return data.results;\n    })\n    .catch(error => {\n      console.error(\n        'There has been a problem with your fetch operation:',\n        error\n      );\n    });\n};\n\n// fetch id and names ganre for movies\nasync function fetchGenresFilmsAPI() {\n  return await fetch(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not OK');\n      }\n      return response.json();\n    })\n    .then(data => {\n      return data.genres;\n    })\n    .catch(error => {\n      console.error(\n        'There has been a problem with your fetch operation:',\n        error\n      );\n    });\n};\n\n// fetch for all information for movie\nasync function fetchMovieInfoAPI(movie_id) {\n  return await fetch(`${BASE_URL}/movie/${movie_id}?api_key=${API_KEY}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not OK');\n      }\n      return response.json();\n    })\n    .then(data => {\n      return data;\n    })\n    .catch(error => {\n      console.error(\n        'There has been a problem with your fetch operation:',\n        error\n      );\n    });\n};","import { fetchPopularFilmsAPI, fetchGenresFilmsAPI } from './API/fetch-film-api';\nimport { refs } from './refs';\n\n// function for render film list markup \nfunction createFilmListFMarkup(data, genres_names) {\n    if (data.length === 0) {\n        return;\n    }\n    return data\n        .map(({ id, title, poster_path, release_date, genre_ids }) => {\n            let release = release_date.slice(0, 4);\n            let genres = [];\n            for (let genre_id of genre_ids) {\n                let genre = genres_names.find(({ id }) => id === genre_id);\n                genres.push(genre.name);\n            };\n            if (genres.length >= 3) {\n                genres = [genres[0], genres[1], 'Other'];\n            };\n            let genres_str = genres.join(', ');\n            return `\n            <li class=\"film-list__item item\" data-id=\"${id}\">\n                <img class=\"film-link__img\" width=\"500px\" src=\"${refs.BASE_IMG_URL}${poster_path}\" alt=\"${title}\" data-id=\"${id}\" data-target=\"card\">\n                <div class=\"wrapper\">\n                    <h3 class=\"film-link__title\" data-target=\"card\">${title}</h3>\n                    <div class=\"film-link__grup\">\n                        <p class=\"film-genres\" data-target=\"card\">${genres_str}</p>\n                        <p class=\"film-year\" data-target=\"card\"><span class=\"film-line\">|</span>${release}</p>\n                    </div>\n                </div>\n            </li>`;}).join('');\n};\n\nfetchGenresFilmsAPI().then(genres => {\n    fetchPopularFilmsAPI().then(data => {\n        let markup = createFilmListFMarkup(data, genres);\n        refs.popularMovieList.insertAdjacentHTML('beforeend', markup);\n    });\n});","import { refs } from './refs';\nimport { fetchMovieInfoAPI } from './API/fetch-film-api';\n\nconst listOfMovies = document.querySelector('.home-film-list');\nconst bodyPage = document.querySelector('.wrapper-modal');\nconst backdrop = document.querySelector('.backdrop')\nconst closeBTN = document.querySelector('.close-btn');\n\n// function for render modal markup \nfunction createModalMarkup({ id, genres, original_title, overview, popularity, poster_path, title, vote_average, vote_count }) {\n    const voteNumeric = String(vote_average).slice(0, 3);\n    const popularityNumeric = popularity.toFixed(1);\n\n    const modalMarkup = `\n    <div class=\"wrapper-modal\">\n        <div class=\"film-modal__poster\">\n            <img class='film-modal__img' width=\"375\" height=\"478\" src=\"${refs.BASE_IMG_URL}${poster_path}\"\n                alt=\"${title}\" />\n        </div>\n        \n        <div class=\"film-modal__details-info details-info\">\n            <!-- Title -->\n            <h2 class=\"details-info__title\">${title}</h2>\n        \n            <ul class=\"details-info__list-static list-static list\">\n        \n                <li class=\"list-static__item\">\n                    <p class=\"info-film-txt\">Vote / Votes</p>\n                    <p class=\"item-vote-rez\">\n                        <span class=\"tem-vote-rez--accent-mode\">${voteNumeric}</span>\n                        ${vote_count}\n                    </p>\n                </li>\n        \n                <li class=\"list-static__item\">\n                    <p class=\"info-film-txt\">Popularity</p>\n                    <p class='rez'>${popularityNumeric}</p>\n                </li>\n        \n                <li class=\"list-static__item\">\n                    <p class=\"info-film-txt\">Original Title</p>\n                    <p class=\"rez\">${original_title}</p>\n                </li>\n        \n                <li class=\"list-static__item\">\n                    <p class=\"info-film-txt\">Genre</p>\n                    <p class='rez'>${genres}</p>\n                </li>\n            </ul>\n        \n            <div class=\"details-info__group\">\n                <p class=\"rez rez-margin\">about</p>\n                <p class=\"rez rez-desc\">${overview}</p>\n            </div>\n        </div>\n    </div>`;\n\n    bodyPage.insertAdjacentHTML('afterBegin', modalMarkup);\n    backdrop.classList.remove('is-hidden');\n    closeBTN.addEventListener('click', closeMovieModalWindow);\n};\n\nexport default function openMovieModal(e) {\n    if (e.target.dataset.target !== 'card') {\n        return;\n    } else {\n        const movieId = e.target.closest('li').dataset.id;\n\n        document.removeEventListener('click', openMovieModal);\n        fetchMovieInfoAPI(movieId)\n            .then(createModalMarkup);\n    }\n}   \n\nlistOfMovies.addEventListener('click', openMovieModal);\n\nexport default function closeMovieModalWindow() {\n    backdrop.classList.add('is-hidden');\n    bodyPage.innerHTML = '';\n    document.addEventListener('click', openMovieModal);\n}\n"],"names":["$ee27a4d7c64fc8c4$export$21666b427502ea6d","BASE_IMG_URL","popularMovieList","document","querySelector","bodyModal","backDrop","closeBtn","async","$69f33d7e8356cda7$export$acdc96c760d6ecbe","fetch","then","response","ok","Error","json","data","results","catch","error","console","$69f33d7e8356cda7$export$6e8ceb3d3ef2d13d","movie_id","genres","markup","genres_names","length","map","id","id1","title","poster_path","release_date","genre_ids","release","slice","genre_id","genre","find","push","name","genres_str","join","$667dedb86a4f7555$var$createFilmListFMarkup","insertAdjacentHTML","$58370b073d19670c$var$listOfMovies","$58370b073d19670c$var$bodyPage","$58370b073d19670c$var$backdrop","$58370b073d19670c$var$closeBTN","$58370b073d19670c$var$createModalMarkup","original_title","overview","popularity","vote_average","vote_count","voteNumeric","String","popularityNumeric","toFixed","modalMarkup","classList","remove","addEventListener","$58370b073d19670c$export$2e2bcd8739ae039","e","target","dataset","movieId","closest","removeEventListener","add","innerHTML"],"version":3,"file":"index.946cd344.js.map"}