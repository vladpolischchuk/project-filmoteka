{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,0BAKIC,EAKAF,EAAAG,KALAC,aACAC,EAIAL,EAAAG,KAJAG,iBACAC,EAGAP,EAAAG,KAHAK,WACAC,EAEAT,EAAAG,KAFAO,WACAC,EACAX,EAAAG,KADAS,SAGAC,EAAoBC,KAAKC,MAAMC,aAAaC,QAAQ,mBAAqB,GACzEC,EAAiBJ,KAAKC,MAAMC,aAAaC,QAAQ,iBAAmB,GAExE,SAASE,EAAuBC,G,IAC5BC,EAD4BD,EAC5BC,GACAC,EAF4BF,EAE5BE,MACAC,EAH4BH,EAG5BG,YACAC,EAJ4BJ,EAI5BI,aACAC,EAL4BL,EAK5BK,OAEQC,EAAUF,EAAaG,MAAM,EAAG,GAChCC,EAAaH,EAAOI,KAAI,SAACC,GACzB,OAAOA,EAAKC,I,IAEZH,EAAWI,QAAU,IACrBJ,EAAa,CAACA,EAAW,GAAIA,EAAW,GAAI,UAEhD,IAAIK,EAAaL,EAAWM,KAAK,MACjC,OAAoB,OAAhBX,EACO,2DAEgCY,OADKd,EAAG,4EACOc,OAAfjC,GAAoCiC,OAArBZ,EAAY,WAEPY,OAFgBb,EAAM,wIAIzBa,OAFGb,EAAM,gIAGqBa,OAD9BF,EAAW,0GAC2BE,OAART,EAAQ,+EAK3F,2DAEuGS,OAD9Dd,EAAG,+IAGYc,OAF+Cb,EAAM,wIAIxDa,OAFGb,EAAM,gIAGqBa,OAD9BF,EAAW,0GAC2BE,OAART,EAAQ,8E,CAMnG,SAASU,EAAaC,GAC1B,IAAI,IAAIC,EAAI,EAAGA,EAAID,EAAKL,OAAQM,KAE3B,EAAAC,EAAAC,mBAAkBH,EAAKC,IACtBG,MAAK,SAAAC,GACF,IAAIC,EAASxB,EAAsBuB,GACnCrC,EAAiBuC,mBAAmB,YAAaD,E,IAM7D,GAAwB,MAApB9B,GAAwD,IAA5BA,EAAiBmB,QAAoC,MAAlBd,GAAoD,IAA1BA,EAAec,QAIlGd,EAAec,OAAS,GAAKnB,EAAmB,KACxDuB,EAAYlB,GACZkB,EAAYvB,QAN8G,CAGxHR,EAAiBuC,mBAAmB,YAFnB,yM,CAYrBrC,EAAWsC,iBAAiB,SAC5B,SAAeC,GACVA,EAAEC,OAAOC,QAAQ,UAAUC,UAAUC,SAAS,iBAAmBJ,EAAEC,OAAOC,QAAQ,UAAUC,UAAUC,SAAS,WAChHzC,EAAWwC,UAAUE,IAAI,UACzBxC,EAASsC,UAAUG,OAAO,UAC1B/C,EAAiBgD,UAAY,GAC7BjB,EAAYvB,IACJiC,EAAEC,OAAOC,QAAQ,UAAUC,UAAUC,SAAS,eACtDvC,EAASsC,UAAUE,IAAI,UACvB1C,EAAWwC,UAAUG,OAAO,UAC5B/C,EAAiBgD,UAAY,GAC7BjB,EAAYlB,G,IAIhBb,EAAiBwC,iBAAiB,QAASS,EAAAC,S","sources":["src/js/library-render.js"],"sourcesContent":["import { refs } from './refs';\nimport { fetchMovieInfoAPI } from './API/fetch-movie-info';\nimport openMovieModal from './open-md-info-film';\n\nconst {\n    BASE_IMG_URL,\n    libraryMovieList,\n    btnWrapper,\n    btnWatched,\n    btnQueue,\n} = refs;\n\nlet listWatchedMuvie =  JSON.parse(localStorage.getItem('watchedMovies')) || [];\nlet listQueueMuvie = JSON.parse(localStorage.getItem('queueMovies')) || [];\n\nfunction createMovieListMarkup ({\n    id,\n    title,\n    poster_path,\n    release_date,\n    genres }) {\n\n        let release = release_date.slice(0, 4);\n        let nameGenres = genres.map((item) => {\n            return item.name;\n        });\n        if (nameGenres.length >= 3) {\n            nameGenres = [nameGenres[0], nameGenres[1], 'Other'];\n        };\n        let genres_str = nameGenres.join(', ');\n        if (poster_path !== null) {\n            return `\n            <li class=\"film-list__item item\" data-id=\"${id}  data-target=\"card\">\n                <img class=\"film-link__img\" src=\"${BASE_IMG_URL}${poster_path}\" alt=\"${title}\" data-target=\"card\"\">\n                <div class=\"wrapper\">\n                    <h3 class=\"film-link__title data-target=\"card\"\" >${title}</h3>\n                    <div class=\"film-link__grup\">\n                        <p class=\"film-genres\" data-target=\"card\">${genres_str}</p>\n                        <p class=\"film-year\" data-target=\"card\"><span class=\"film-line\">|</span>${release}</p>\n                    </div>\n                </div>\n            </li>`;\n        }\n        return `\n            <li class=\"film-list__item item\" data-id=\"${id}  data-target=\"card\">\n                <img class=\"film-link__img\" src=\"https://images.unsplash.com/photo-1512113569142-8a60fccc7caa\" alt=\"${title}\" data-target=\"card\"\">\n                <div class=\"wrapper\">\n                    <h3 class=\"film-link__title data-target=\"card\"\" >${title}</h3>\n                    <div class=\"film-link__grup\">\n                        <p class=\"film-genres\" data-target=\"card\">${genres_str}</p>\n                        <p class=\"film-year\" data-target=\"card\"><span class=\"film-line\">|</span>${release}</p>\n                    </div>\n                </div>\n            </li>`;\n};\n\nexport function libraryList (list) {\n   for(let i = 0; i < list.length; i++) {\n\n        fetchMovieInfoAPI(list[i])\n        .then(date => {\n            let markup = createMovieListMarkup(date);\n            libraryMovieList.insertAdjacentHTML('beforeend', markup);\n        });\n\n};\n};\n\nif((listWatchedMuvie == null || listWatchedMuvie.length === 0) && (listQueueMuvie == null || listQueueMuvie.length === 0 )) {\n    const markup =  `<h2 class=\"message-text\">Ooops! You library is empty yet :(</h2>\n    <img class=\"message-img\" src='https://o.remove.bg/downloads/dc6a848e-b90f-4d1b-9ad7-47629b0398c6/ooops-removebg-preview.png' >`;\n    libraryMovieList.insertAdjacentHTML('beforeend', markup);\n} else if(listQueueMuvie.length > 0 || listWatchedMuvie > 0) {\n  libraryList(listQueueMuvie);\n  libraryList(listWatchedMuvie);\n};\n\n// btnQueue.addEventListener('click', () => {\n//   btnQueue.classList.toggle('active')\n// });\n\nbtnWrapper.addEventListener('click', addTo)\nfunction addTo(e) {\n  if(e.target.closest('button').classList.contains('btn_watched') && !e.target.closest('button').classList.contains('active')) {\n    btnWatched.classList.add('active');\n    btnQueue.classList.remove('active');\n    libraryMovieList.innerHTML = \"\";\n    libraryList(listWatchedMuvie);\n  } else if(e.target.closest('button').classList.contains('btn_queue')){\n    btnQueue.classList.add('active');\n    btnWatched.classList.remove('active');\n    libraryMovieList.innerHTML = \"\";\n    libraryList(listQueueMuvie);\n  };\n};\n\nlibraryMovieList.addEventListener('click', openMovieModal);"],"names":["$4Nugj","parcelRequire","$f79e75a7cb2d4ae4$var$BASE_IMG_URL","refs","BASE_IMG_URL","$f79e75a7cb2d4ae4$var$libraryMovieList","libraryMovieList","$f79e75a7cb2d4ae4$var$btnWrapper","btnWrapper","$f79e75a7cb2d4ae4$var$btnWatched","btnWatched","$f79e75a7cb2d4ae4$var$btnQueue","btnQueue","$f79e75a7cb2d4ae4$var$listWatchedMuvie","JSON","parse","localStorage","getItem","$f79e75a7cb2d4ae4$var$listQueueMuvie","$f79e75a7cb2d4ae4$var$createMovieListMarkup","param","id","title","poster_path","release_date","genres","release","slice","nameGenres","map","item","name","length","genres_str","join","concat","$f79e75a7cb2d4ae4$export$3bf377c9248324e8","list","i","$3DIF4","fetchMovieInfoAPI","then","date","markup1","insertAdjacentHTML","addEventListener","e","target","closest","classList","contains","add","remove","innerHTML","$jUuu7","default"],"version":3,"file":"library.fd84dc36.js.map"}